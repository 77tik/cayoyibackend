# Weedfilesys 分布式文件管理系统 笔记

## 集群设置；
+ 集群的结构是什么样？
  + master中心节点统筹各个集群节点的请求
    + filer节点向master节点请求卷服务器的地址
    + 卷服务器要向master节点发心跳报告自己的健康状态
  + 结构图：
```
                    [你本地应用：客户端]
                              |
                          (发起请求)
                              v
     -----------------------------------------------------
    |                      SeaweedFS 集群                  |
    |                                                     |
    |   [Filer 节点] -----------→ [Master 节点]            |
    |         |                        ↑                  |
    |         |                        | 状态/心跳         |
    |         ↓                        |                  |
    |   [Volume Server] ←------------                     |
    |     （数据最终存储位置）                                |
     -----------------------------------------------------

```
  + 多个filer副本之间的同步
    + 分布式不可能每个filer都只有一个节点
      + 多个 Filer 实例可以分别部署在不同区域（比如不同数据中心）； 
      + 某些 Filer 是主节点（Leader），某些是副本节点（Follower）； 
      + 副本节点通过订阅机制，实时同步主节点上的变更数据。
    + 什么是filer？
      + Filer 是 Weedfilesys 中负责管理“文件元数据”（目录结构、权限、文件路径等）的组件。 
      + 你可以通过 HTTP/gRPC 向 Filer 上传文件，它会： 把文件切片； 把切片写入 Volume Server； 
      + 自己记录文件 → 文件块 ID 的映射关系（即元数据）；
    
